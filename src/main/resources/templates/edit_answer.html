<!DOCTYPE html>
<html lang="ZH-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>写回答</title>
    <link rel="stylesheet" href="../static/css/maomao.css" th:href="@{/css/maomao.css}">
    <link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">
    <style>
        #editor—wrapper {
            border: 1px solid #ccc;
            z-index: 100; /* 按需定义 */
        }
        #toolbar-container { border-bottom: 1px solid #ccc; }
        #editor-container { height: 500px; }
    </style>
</head>
<body class="flex flex1 column" style="background-color: #e8e8e8;margin: 0">
<div class="m-backcolor">
    <div class="flex m-mg8">
        <a class="m-font-gray m-underlineCancel">返回</a>
        <div class="flex1" style="text-align: center;margin-right: 40px">回答</div>
    </div>
</div>
<form class="m-backcolor">
    <div class="m-mg8" style="margin-top: -10px;margin-bottom: 12px">
        <h4 th:text="${question.getTitle()}">哈哈哈哈</h4>
        <div th:text="${question.getIntroduce()}" class="m-font-gray" style="font-size: 10px;margin-top: -15px"> 回答简介</div>
    </div>
    <div id="editor—wrapper">
        <div id="toolbar-container"><!-- 工具栏 --></div>
        <div id="editor-container"><!-- 编辑器 --></div>
    </div>
    <div class="m-mg8" style="text-align: right;margin-right: 8px">
        <button type="button" id="answer">提交</button>
    </div>
</form>

</body>
<script type="text/javascript" src="../static/js/jquery-2.0.3.js" th:src="@{/js/jquery-2.0.3.js}"></script>
<script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>
<script>
    const { createEditor, createToolbar } = window.wangEditor

    const editorConfig = {
        placeholder: 'Type here...',
        onChange(editor) {
            const html = editor.getHtml()
            console.log('editor content', html)
            // 也可以同步到 <textarea>
        }
    }

    const editor = createEditor({
        selector: '#editor-container',
        html: '<p><br></p>',
        config: editorConfig,
        mode: 'default', // or 'simple'
    })

    const toolbarConfig = {}

    const toolbar = createToolbar({
        editor,
        selector: '#toolbar-container',
        config: toolbarConfig,
        mode: 'simple', // or 'simple'
    })

    let answer_btn = document.getElementById("answer");
    answer_btn.addEventListener("click",function () {
        let answer = {"content" : editor.getHtml(), "questionId" : [[${question.getId()}]]};
        $.ajax({
            url:"http://localhost:8080/answer/add",
            data: answer,
            type : 'POST',
            dataType : 'text',
            success :function(data){
                //发送成功返回到文章管理页面
                document.location.href = "/question/questionAnswer/" + data;
            }
        })
    })
</script>
</html>